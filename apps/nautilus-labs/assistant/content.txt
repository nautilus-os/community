<div id="nautilusAiContainer" style="display: flex; flex-direction: column; height: 100%; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);">
          <div style="background: rgba(15, 23, 42, 0.9); border-bottom: 2px solid rgba(125, 211, 192, 0.3); padding: 15px 20px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
              <i class="fas fa-robot" style="color: var(--accent); font-size: 24px;"></i>
              <div>
                <h2 style="color: var(--accent); margin: 0; font-size: 18px;">Nautilus AI Assistant</h2>
                <div style="color: #94a3b8; font-size: 11px; margin-top: 2px;">by lanefiedler-731 | Powered by WebLLM</div>
              </div>
            </div>
            <div id="aiStatus" style="display: flex; align-items: center; gap: 8px; font-size: 12px; color: #64748b;">
              <div class="loading-spinner" style="width: 12px; height: 12px; border: 2px solid rgba(125, 211, 192, 0.3); border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite;"></div>
              <span>Initializing AI model...</span>
            </div>
          </div>
          
          <div style="background: rgba(15, 23, 42, 0.5); border-bottom: 1px solid rgba(125, 211, 192, 0.2); padding: 8px 20px;">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px; font-size: 11px; color: #64748b;">
              <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i class="fas fa-robot" style="color: var(--accent);"></i>
                  <span>Model:</span>
                  <select id="aiModelSelect" onchange="switchAIModel(this.value)" style="background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(125, 211, 192, 0.3); border-radius: 4px; padding: 4px 8px; color: var(--accent); cursor: pointer; font-size: 11px;">
                    <option value="fast" selected>âš¡ Dumb Fast</option>
                    <option value="smart">ðŸ§  Smart Slow</option>
                  </select>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i class="fas fa-microchip" style="color: var(--accent);"></i>
                  <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                    <input type="checkbox" id="aiWebGPUToggle" checked style="cursor: pointer;">
                    <span>WebGPU</span>
                  </label>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-cogs" style="color: var(--accent);"></i>
                <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                  <input type="checkbox" id="aiAutomationToggle" checked style="cursor: pointer;" onchange="nautilusAI.toolsEnabled = this.checked; showToast(this.checked ? 'OS Automation Enabled' : 'OS Automation Disabled', 'fa-cogs');">
                  <span style="color: var(--accent); font-weight: bold;">ðŸ¤– Automation</span>
                </label>
              </div>
            </div>
          </div>
          
          <div id="aiChatMessages" style="flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px;">
            <div style="background: rgba(125, 211, 192, 0.1); border: 1px solid rgba(125, 211, 192, 0.3); border-radius: 10px; padding: 15px;">
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <i class="fas fa-robot" style="color: var(--accent); font-size: 18px;"></i>
                <strong style="color: var(--accent);">Nautilus AI</strong>
              </div>
              <div style="color: #cbd5e1; line-height: 1.6;">
                Hello! I'm your Nautilus AI Assistant. I can help you understand and navigate NautilusOS.<br><br>
                <strong style="color: var(--accent);"><i class="fas fa-brain"></i> Model: Smarty (Qwen3-0.6B)</strong><br>
                Advanced reasoning with thinking mode enabled. Switch models in the dropdown if needed.<br><br>
                <strong style="color: var(--accent);">ðŸ¤– OS Automation Enabled!</strong><br>
                I can control NautilusOS for you! I can open apps, run terminal commands, manage files, change settings, and more. Just ask me to do something and I'll request your approval before taking action.<br><br>
                <strong style="color: var(--accent);">ðŸ’­ Thinking Mode Active!</strong><br>
                For complex tasks, I'll show my reasoning process in a collapsible "Thinking" section.<br><br>
                Try: "Open calculator" or "Change theme to blue"
              </div>
            </div>
          </div>
          
          <div style="background: rgba(15, 23, 42, 0.9); border-top: 2px solid rgba(125, 211, 192, 0.3); padding: 15px 20px;">
            <div style="display: flex; gap: 10px;">
              <textarea id="aiInput" placeholder="Ask me anything about NautilusOS..." style="flex: 1; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(125, 211, 192, 0.3); border-radius: 8px; padding: 12px; color: #e2e8f0; font-size: 14px; resize: none; font-family: inherit; min-height: 50px; max-height: 150px;" rows="2"></textarea>
              <button id="aiSendBtn" onclick="sendAiMessage()" style="background: var(--accent); border: none; border-radius: 8px; padding: 0 20px; cursor: pointer; color: #0f172a; font-weight: bold; font-size: 14px; transition: all 0.2s;" onmouseover="this.style.background='var(--accent-hover)'" onmouseout="this.style.background='var(--accent)'">
                <i class="fas fa-paper-plane"></i> Send
              </button>
            </div>
            <div style="display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap;">
              <button onclick="sendQuickQuestion('What apps are available in NautilusOS?')" style="background: rgba(125, 211, 192, 0.15); border: 1px solid rgba(125, 211, 192, 0.3); color: var(--accent); padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(125, 211, 192, 0.25)'" onmouseout="this.style.background='rgba(125, 211, 192, 0.15)'">
                <i class="fas fa-th"></i> Available Apps
              </button>
              <button onclick="sendQuickQuestion('How do I manage files in NautilusOS?')" style="background: rgba(125, 211, 192, 0.15); border: 1px solid rgba(125, 211, 192, 0.3); color: var(--accent); padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(125, 211, 192, 0.25)'" onmouseout="this.style.background='rgba(125, 211, 192, 0.15)'">
                <i class="fas fa-folder"></i> File Management
              </button>
              <button onclick="sendQuickQuestion('How do I customize my NautilusOS experience?')" style="background: rgba(125, 211, 192, 0.15); border: 1px solid rgba(125, 211, 192, 0.3); color: var(--accent); padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(125, 211, 192, 0.25)'" onmouseout="this.style.background='rgba(125, 211, 192, 0.15)'">
                <i class="fas fa-palette"></i> Customization
              </button>
              <button onclick="clearAiChat()" style="background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); color: #ef4444; padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(239, 68, 68, 0.25)'" onmouseout="this.style.background='rgba(239, 68, 68, 0.15)'">
                <i class="fas fa-trash"></i> Clear Chat
              </button>
            </div>
          </div>
        </div>
        
        <style>
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          #aiChatMessages::-webkit-scrollbar {
            width: 8px;
          }
          #aiChatMessages::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 4px;
          }
          #aiChatMessages::-webkit-scrollbar-thumb {
            background: rgba(125, 211, 192, 0.3);
            border-radius: 4px;
          }
          #aiChatMessages::-webkit-scrollbar-thumb:hover {
            background: rgba(125, 211, 192, 0.5);
          }
          #aiInput:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(125, 211, 192, 0.2);
          }
        </style>